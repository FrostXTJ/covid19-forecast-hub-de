name: update_EU

on: workflow_dispatch

jobs:
  copy-file:
    runs-on: ubuntu-latest
    steps:
    
    - uses: actions/checkout@v2

    - name: setup python
      uses: actions/setup-python@v2
      with: 
        python-version: '3.x' # Version range or exact version of a Python version to use, using SemVer's version range syntax

    - run: pip3 install -r requirements.txt
    - run: |
        cd ./code/hub_transfer
        python test.py
        cd ../../

    - name: Pushes test file
      uses: dmnemec/copy_file_to_another_repo_action@main
      env:
        API_TOKEN_GITHUB: ${{ secrets.GITHUBTOKEN}}
      with:
        source_file: 'upload_eu/data-processed'
        destination_repo: 'KITmetricslab/covid19-forecast-hub-europe'
        destination_folder: 'data-processed'
        user_email: ${{ secrets.EMAIL}}
        user_name: 'JannikBot'
        commit_message: 'Add De/Pl forecasts'
